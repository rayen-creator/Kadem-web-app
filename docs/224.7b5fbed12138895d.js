"use strict";(self.webpackChunkmini_project=self.webpackChunkmini_project||[]).push([[224],{2224:(L,f,a)=>{a.r(f),a.d(f,{ClassModule:()=>E});var u=a(9808),c=a(5425),t=a(1223);let v=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-class"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},directives:[c.lC],styles:[""]}),s})();var b=a(2340),Z=a(520);let g=(()=>{class s{constructor(e){this.http=e,this.url=b.N.defaultUrl+"/classe"}getAllClass(){return this.http.get(this.url)}addClass(e){return this.http.post(this.url+"/add",e)}delete(e){return this.http.delete(this.url+"/delete/"+e)}update(e){return this.http.put(this.url+"/update/"+e.idClasse,e)}getClassByID(e){return this.http.get(this.url+"/display/"+e)}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(Z.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"any"}),s})();var h=a(2290);function x(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"li",24)(1,"button",25),t._UZ(2,"img",26),t.qZA(),t.TgZ(3,"div",27)(4,"button",22),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw().$implicit;return t.oxw().deleteProf(d,l)}),t.O4$(),t.TgZ(5,"svg",28),t._UZ(6,"path",29)(7,"path",30),t.qZA(),t._uU(8),t.qZA()()()}if(2&s){const e=n.$implicit;t.hYB("title","",e.nomProf," ",e.prenomProf,""),t.xp6(2),t.s9C("src",e.image,t.LSH),t.xp6(6),t.AsE(" ",e.nomProf," ",e.prenomProf,"")}}function A(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"li",24)(1,"button",25),t._UZ(2,"img",26),t.qZA(),t.TgZ(3,"div",27)(4,"button",22),t.NdJ("click",function(){const l=t.CHM(e).$implicit,d=t.oxw().$implicit;return t.oxw().deleteStud(d,l)}),t.O4$(),t.TgZ(5,"svg",28),t._UZ(6,"path",29)(7,"path",30),t.qZA(),t._uU(8),t.qZA()()()}if(2&s){const e=n.$implicit;t.hYB("title","",e.nomE," ",e.prenomE,""),t.xp6(2),t.s9C("src",e.image,t.LSH),t.xp6(6),t.AsE(" ",e.nomE," ",e.prenomE," ")}}const T=function(s){return["update",s]};function F(s,n){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._UZ(2,"i",16),t.TgZ(3,"strong"),t._uU(4),t.qZA()(),t.TgZ(5,"td")(6,"ul",17),t.YNc(7,x,9,5,"li",18),t.qZA()(),t.TgZ(8,"td")(9,"ul",17),t.YNc(10,A,9,5,"li",18),t.qZA()(),t.TgZ(11,"td")(12,"div",19)(13,"button",20),t._UZ(14,"i",21),t._uU(15," Add "),t.qZA(),t.TgZ(16,"button",22),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().Delete(l)}),t._UZ(17,"i",23),t._uU(18," Delete "),t.qZA()()()()}if(2&s){const e=n.$implicit;t.xp6(4),t.Oqu(e.nom),t.xp6(3),t.Q6J("ngForOf",e.professeurs),t.xp6(3),t.Q6J("ngForOf",e.etudiants),t.xp6(3),t.Q6J("routerLink",t.VKq(4,T,e.idClasse))}}let q=(()=>{class s{constructor(e,o,r){this.classService=e,this.router=o,this.toastr=r}ngOnInit(){this.classService.getAllClass().subscribe({next:e=>{this.list=e,console.log(this.list)},error:e=>{console.log("error"+e)}})}Delete(e){this.toastr.success("Class deleted");let o=this.list.indexOf(e);this.classService.delete(e.idClasse).subscribe(()=>{this.list.splice(o,1)})}deleteStud(e,o){this.toastr.success("Student deleted");let r=e.etudiants.indexOf(o);e.etudiants.splice(r,1),this.classService.update(e).subscribe(()=>{})}deleteProf(e,o){this.toastr.success("Professor deleted");let r=e.professeurs.indexOf(o);e.professeurs.splice(r,1),this.classService.update(e).subscribe(()=>{})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(g),t.Y36(c.F0),t.Y36(h._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-list-class"]],decls:32,vars:1,consts:[[1,"container-xxl","flex-grow-1","container-p-y"],[1,"row","align-items-center"],[1,"col-md-6"],[1,"mb-3"],[1,"card-title"],[1,"text-muted","fw-normal","ms-2"],[1,"d-flex","flex-wrap","align-items-center","justify-content-end","gap-2","mb-6"],[1,"nav","nav-pills"],["routerLink","/backoffice/class/form",1,"btn","btn-primary"],[1,"bx","bx-plus","me-1"],[1,"card"],[1,"table-responsive","text-nowrap"],[1,"table"],[2,"font-size","1em"],[1,"table-border-bottom-0"],[4,"ngFor","ngForOf"],[1,"fab","fa-angular","fa-lg","text-danger","me-3"],[1,"list-unstyled","users-list","m-0","avatar-group","d-flex","align-items-center"],["class","avatar avatar-md pull-up","data-bs-original-title","","data-bs-placement","top","data-bs-toggle","tooltip","data-popup","tooltip-custom",3,"title",4,"ngFor","ngForOf"],[1,"dropdown"],["href","javascript:void(0);",1,"dropdown-item",3,"routerLink"],[1,"bx","bx-edit-alt","me-1"],["href","javascript:void(0);",1,"dropdown-item",3,"click"],[1,"bx","bx-trash","me-1"],["data-bs-original-title","","data-bs-placement","top","data-bs-toggle","tooltip","data-popup","tooltip-custom",1,"avatar","avatar-md","pull-up",3,"title"],["data-bs-toggle","dropdown","type","button",1,"btn","p-0","hide-arrow","avatar","avatar-md","pull-up"],["alt","Avatar",1,"rounded-circle",3,"src"],[1,"dropdown-menu"],["fill","currentColor","height","16","viewBox","0 0 16 16","width","16","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-trash"],["d","M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"],["d","M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z","fill-rule","evenodd"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"br"),t.TgZ(5,"h1",4),t._uU(6,"Class "),t.TgZ(7,"span",5),t._uU(8," Details"),t.qZA()()()(),t.TgZ(9,"div",2)(10,"div",6)(11,"div"),t._UZ(12,"ul",7),t.qZA(),t.TgZ(13,"div")(14,"a",8),t._UZ(15,"i",9),t._uU(16," Add a class"),t.qZA()()()()(),t.TgZ(17,"div",10)(18,"div",11)(19,"table",12)(20,"thead")(21,"tr")(22,"th",13),t._uU(23,"Class name"),t.qZA(),t.TgZ(24,"th",13),t._uU(25,"Profesors"),t.qZA(),t.TgZ(26,"th",13),t._uU(27,"Students"),t.qZA(),t.TgZ(28,"th",13),t._uU(29,"Actions"),t.qZA()()(),t.TgZ(30,"tbody",14),t.YNc(31,F,19,6,"tr",15),t.qZA()()()()()),2&e&&(t.xp6(31),t.Q6J("ngForOf",o.list))},directives:[c.yS,u.sg,c.rH],styles:[""]}),s})();var i=a(2382);class U{}var J=a(1672),M=a(543);function y(s,n){1&s&&(t.TgZ(0,"p"),t._uU(1,"first name is required"),t.qZA())}function w(s,n){1&s&&(t.TgZ(0,"p"),t._uU(1,"first name is invalid"),t.qZA())}function S(s,n){if(1&s&&(t.TgZ(0,"small",25),t.YNc(1,y,2,0,"p",26),t.YNc(2,w,2,0,"p",26),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.form.controls.nom.hasError("required")),t.xp6(1),t.Q6J("ngIf",e.form.controls.nom.hasError("minlength"))}}function O(s,n){if(1&s&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&s){const e=n.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.AsE("",e.prenomProf," ",e.nomProf,"")}}function k(s,n){if(1&s&&(t.TgZ(0,"option",27),t._uU(1),t.qZA()),2&s){const e=n.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.AsE("",e.prenomE," ",e.nomE,"")}}const p=function(s){return{"visually-hidden":s}},C=function(){return{standalone:!0}};let _=(()=>{class s{constructor(e,o,r,l,d,m,Q){this.classService=e,this.profesorService=o,this.studentService=r,this.router=l,this.localRoute=d,this.fb=m,this.toastr=Q}ngOnInit(){let e=this.localRoute.snapshot.params.id;null!=e?(this.action="Add profesor and students",this.classService.getClassByID(e).subscribe(o=>{this.classe=o},()=>{console.log("error")},()=>{console.log("complete")})):(this.action="Add class",this.classe=new U),this.profesorService.getAllProfesor().subscribe({next:o=>{this.prof=o.filter(r=>!this.classe.professeurs.find(l=>r.idProfesseur===l.idProfesseur))},error:o=>{console.log("error"+o)},complete:()=>{}}),this.studentService.getAllEtudiants().subscribe({next:o=>{this.stud=o.filter(r=>!this.classe.etudiants.find(l=>r.idEtudiant===l.idEtudiant))},error:o=>{console.log("error"+o)},complete:()=>{}}),this.form=this.fb.group({nom:["",[i.kI.required,i.kI.minLength(3)]],profesor:[""],student:[""]})}saveClass(){"Add class"==this.action?this.classService.addClass(this.classe).subscribe(()=>{this.router.navigate(["/backoffice/class/"]),this.toastr.success(this.classe.nom+" added")}):(this.classe.professeurs.push(this.profesor),this.classe.etudiants.push(this.student),this.classService.update(this.classe).subscribe(()=>{window.location.reload(),this.toastr.success(this.classe.nom+" updated")}))}refresh(){window.location.reload()}back(){this.router.navigate(["/backoffice/class/"])}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(g),t.Y36(J._),t.Y36(M.H),t.Y36(c.F0),t.Y36(c.gz),t.Y36(i.qu),t.Y36(h._W))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-form-class"]],decls:36,vars:25,consts:[[1,"container-xxl","flex-grow-1","container-p-y"],[1,"col-xl"],[1,"card","mb-4"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"text-muted","float-end"],[1,"card-body"],[3,"formGroup"],[1,"mb-3"],[1,"form-label",3,"ngClass"],[1,"form-outline",3,"ngClass"],["aria-label","John Doe","formControlName","nom","name","nom","placeholder","Ex : 3A45 ","type","text",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["class","alert-danger",4,"ngIf"],[1,"form-outline","row",3,"ngClass"],[1,"mt-2","mb-3","col-md-3"],[1,"form-label"],["name","profesor",1,"form-select","form-select-lg",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["name","student",1,"form-select","form-select-lg",3,"ngModel","ngModelOptions","ngModelChange"],[1,"row"],[1,"col-9"],[1,"btn","btn-md","btn-success",3,"disabled","click"],[1,"col-3","float-end"],["type","button",1,"btn","btn-md","btn-secondary","float-lg-end",3,"click"],["type","button",1,"btn","btn-md","btn-warning","float-lg-end",2,"margin-right","2%",3,"ngClass","click"],[1,"alert-danger"],[4,"ngIf"],[3,"ngValue"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5,"Class"),t.qZA(),t.TgZ(6,"small",5),t._uU(7),t.qZA()(),t.TgZ(8,"div",6)(9,"form",7)(10,"div",8)(11,"label",9),t._uU(12,"Class name"),t.qZA(),t.TgZ(13,"div",10)(14,"input",11),t.NdJ("ngModelChange",function(l){return o.classe.nom=l}),t.qZA(),t.YNc(15,S,3,2,"small",12),t.qZA(),t.TgZ(16,"div",13)(17,"div",14)(18,"label",15),t._uU(19,"Add a profesor"),t.qZA(),t.TgZ(20,"select",16),t.NdJ("ngModelChange",function(l){return o.profesor=l}),t.YNc(21,O,2,3,"option",17),t.qZA()(),t.TgZ(22,"div",14)(23,"label",15),t._uU(24,"Add a Student"),t.qZA(),t.TgZ(25,"select",18),t.NdJ("ngModelChange",function(l){return o.student=l}),t.YNc(26,k,2,3,"option",17),t.qZA()()()(),t.TgZ(27,"div",19)(28,"div",20)(29,"button",21),t.NdJ("click",function(){return o.saveClass()}),t._uU(30,"Save "),t.qZA()(),t.TgZ(31,"div",22)(32,"button",23),t.NdJ("click",function(){return o.back()}),t._uU(33,"Back to list "),t.qZA(),t.TgZ(34,"button",24),t.NdJ("click",function(){return o.refresh()}),t._uU(35,"Refresh "),t.qZA()()()()()()()()),2&e&&(t.xp6(7),t.Oqu(o.action),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("ngClass",t.VKq(15,p,"Add class"!=o.action)),t.xp6(2),t.Q6J("ngClass",t.VKq(17,p,"Add class"!=o.action)),t.xp6(1),t.Q6J("ngModel",o.classe.nom),t.xp6(1),t.Q6J("ngIf",o.form.controls.nom.invalid&&o.form.controls.nom.touched),t.xp6(1),t.Q6J("ngClass",t.VKq(19,p,"Add class"==o.action)),t.xp6(4),t.Q6J("ngModel",o.profesor)("ngModelOptions",t.DdM(21,C)),t.xp6(1),t.Q6J("ngForOf",o.prof),t.xp6(4),t.Q6J("ngModel",o.student)("ngModelOptions",t.DdM(22,C)),t.xp6(1),t.Q6J("ngForOf",o.stud),t.xp6(3),t.Q6J("disabled",o.form.invalid),t.xp6(5),t.Q6J("ngClass",t.VKq(23,p,"Add class"==o.action)))},directives:[i._Y,i.JL,i.sg,u.mk,i.Fj,i.JJ,i.u,u.O5,i.EJ,i.On,u.sg,i.YN,i.Kr],styles:[""]}),s})();const Y=[{path:"",component:v,children:[{path:"",component:q},{path:"form",component:_},{path:"update/:id",component:_}]}];let N=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[c.Bz.forChild(Y)],c.Bz]}),s})(),E=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[u.ez,N,i.UX,i.u5]]}),s})()}}]);