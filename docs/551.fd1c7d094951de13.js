"use strict";(self.webpackChunkmini_project=self.webpackChunkmini_project||[]).push([[551],{4551:(w,g,a)=>{a.r(g),a.d(g,{MissionModule:()=>F});var m=a(9808),d=a(5425),n=a(2382),v=a(7179),b=a(2340),i=a(1223),Z=a(520);const c=`${b.N.defaultUrl}/controllerMission`;let h=(()=>{class e{constructor(t){this.http=t}DisplayMissions(){return this.http.get(`${c}/DisplayMissions`)}addMission(t){return this.http.post(`${c}/ajouterMission`,t)}deleteMissionById(t){return this.http.delete(`${c}/deleteMission/${t}`)}updateMission(t){return this.http.put(`${c}/updateMissionById`,t)}displayMissionByID(t){return this.http.get(`${c}/DisplayMissionById/${t}`)}DisplayMissionByContrat(t){return this.http.get(`${c}/DisplayMissionByContrat/${t}`)}assignMissionToContrat(t,o){return this.http.get(`${c}/assignMissionToContrat/${t}/${o}`)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Z.eN))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function M(e,s){1&e&&(i.TgZ(0,"div",25),i._uU(1," Champ Title est obligatoire "),i.qZA())}function y(e,s){1&e&&(i.TgZ(0,"div",25),i._uU(1," Champ Duration est obligatoire "),i.qZA())}function T(e,s){1&e&&(i.TgZ(0,"div",25),i._uU(1," Champ technologies est obligatoire "),i.qZA())}function C(e,s){1&e&&(i.TgZ(0,"div",25),i._uU(1," Champ description est obligatoire "),i.qZA())}let f=(()=>{class e{constructor(t,o,r,l){this.missionService=t,this.contratService=o,this.route=r,this.router=l,this.editable=!1,this.myForm=new n.cw({title:new n.NI("",n.kI.required),duration:new n.NI("",n.kI.required),technologies:new n.NI("",n.kI.required),description:new n.NI("",n.kI.required)})}ngOnInit(){var t;null===(t=this.route.parent)||void 0===t||t.params.subscribe(o=>{this.idParent=+o.id,this.contratService.getContratById(+o.id).subscribe(r=>this.contrat=r),this.route.params.subscribe(r=>{void 0!==r.idm&&(this.idChild=+r.idm,this.editable=!0,this.missionService.displayMissionByID(+r.idm).subscribe(l=>{let u=l;this.myForm=new n.cw({title:new n.NI(u.title,n.kI.required),duration:new n.NI(u.duration,n.kI.required),technologies:new n.NI(u.technologies,n.kI.required),description:new n.NI(u.description,n.kI.required)})}))})})}onSubmit(){this.editable?this.missionService.updateMission(Object.assign(Object.assign({},this.myForm.value),{contrat:this.contrat,idMission:this.idChild})).subscribe(()=>this.router.navigateByUrl("backoffice/contrat/"+this.idParent+"/mission")):this.missionService.addMission(Object.assign(Object.assign({},this.myForm.value),{contrat:this.contrat})).subscribe(()=>this.router.navigateByUrl("backoffice/contrat/"+this.idParent+"/mission"))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(h),i.Y36(v.H),i.Y36(d.gz),i.Y36(d.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-form-mission"]],decls:49,vars:10,consts:[[1,"content-wrapper"],[1,"container-xxl","flex-grow-1","container-p-y"],[1,"fw-bold","py-3","mb-4"],[1,"text-muted","fw-light",2,"cursor","pointer",3,"routerLink"],[1,"row"],[1,"col-xxl"],[1,"card","mb-4"],[1,"card-header","d-flex","align-items-center","justify-content-between"],[1,"mb-0"],[1,"card-body"],["name","form",3,"formGroup","ngSubmit"],[1,"row","mb-3"],["for","basic-icon-default-company",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],[1,"input-group","input-group-merge"],["type","text","required","","name","title","formControlName","title",1,"form-control"],[1,"form-text"],["class","alert alert-danger","role","alert",4,"ngIf"],["type","number","required","","name","duration","formControlName","duration",1,"form-control"],["for","basic-icon-default-email",1,"col-sm-2","col-form-label"],["type","text","required","","name","technologies","formControlName","technologies",1,"form-control"],["for","basic-default-message",1,"col-sm-2","col-form-label"],["id","basic-default-message","name","description","aria-describedby","basic-icon-default-message2","formControlName","description",1,"form-control"],[1,"row","justify-content-end"],[1,"btn","btn-primary",3,"disabled"],["role","alert",1,"alert","alert-danger"]],template:function(t,o){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h4",2)(3,"span",3),i._uU(4,"Liste/"),i.qZA(),i._uU(5),i.qZA(),i.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"h5",8),i._uU(11),i.qZA()(),i.TgZ(12,"div",9)(13,"form",10),i.NdJ("ngSubmit",function(){return o.myForm.valid&&o.onSubmit()}),i.TgZ(14,"div",11)(15,"label",12),i._uU(16,"Title"),i.qZA(),i.TgZ(17,"div",13)(18,"div",14),i._UZ(19,"input",15),i.qZA(),i.TgZ(20,"div",16),i.YNc(21,M,2,0,"div",17),i.qZA()()(),i.TgZ(22,"div",11)(23,"label",12),i._uU(24,"duration"),i.qZA(),i.TgZ(25,"div",13)(26,"div",14),i._UZ(27,"input",18),i.qZA(),i.TgZ(28,"div",16),i.YNc(29,y,2,0,"div",17),i.qZA()()(),i.TgZ(30,"div",11)(31,"label",19),i._uU(32,"technologies"),i.qZA(),i.TgZ(33,"div",13)(34,"div",14),i._UZ(35,"input",20),i.qZA(),i.TgZ(36,"div",16),i.YNc(37,T,2,0,"div",17),i.qZA()()(),i.TgZ(38,"div",11)(39,"label",21),i._uU(40,"Description"),i.qZA(),i.TgZ(41,"div",13),i._UZ(42,"textarea",22),i.TgZ(43,"div",16),i.YNc(44,C,2,0,"div",17),i.qZA()()(),i.TgZ(45,"div",23)(46,"div",13)(47,"button",24),i._uU(48),i.qZA()()()()()()()()()()),2&t&&(i.xp6(3),i.s9C("routerLink",o.editable?"../../":"../"),i.xp6(2),i.hij(" ",o.editable?"Modifier":"Ajouter"," "),i.xp6(6),i.hij(" ",o.editable?"Modifier":"Ajouter"," Mission "),i.xp6(2),i.Q6J("formGroup",o.myForm),i.xp6(8),i.Q6J("ngIf",o.myForm.controls.title.invalid&&o.myForm.controls.title.touched),i.xp6(8),i.Q6J("ngIf",o.myForm.controls.duration.invalid&&o.myForm.controls.duration.touched),i.xp6(8),i.Q6J("ngIf",o.myForm.controls.technologies.invalid&&o.myForm.controls.technologies.touched),i.xp6(7),i.Q6J("ngIf",o.myForm.controls.description.invalid&&o.myForm.controls.description.touched),i.xp6(3),i.Q6J("disabled",!o.myForm.valid),i.xp6(1),i.hij(" ",o.editable?"Modifier":"Ajouter"," "))},directives:[d.rH,n._Y,n.JL,n.sg,n.Fj,n.Q7,n.JJ,n.u,m.O5,n.wV],styles:[""]}),e})();var p=a(9966);function _(e,s){if(1&e){const t=i.EpF();i.TgZ(0,"tr")(1,"td"),i._UZ(2,"i",17),i.TgZ(3,"strong"),i._uU(4),i.qZA()(),i.TgZ(5,"td"),i._uU(6),i.qZA(),i.TgZ(7,"td"),i._uU(8),i.qZA(),i.TgZ(9,"td"),i._uU(10),i.qZA(),i.TgZ(11,"td"),i._uU(12),i.qZA(),i.TgZ(13,"td")(14,"div",18)(15,"button",19),i._UZ(16,"i",20),i.qZA(),i.TgZ(17,"div",21)(18,"a",22),i._UZ(19,"i",23),i._uU(20," Edit"),i.qZA(),i.TgZ(21,"a",24),i.NdJ("click",function(){const l=i.CHM(t).$implicit;return i.oxw().delete(l.idMission)}),i._UZ(22,"i",25),i._uU(23," Delete"),i.qZA()()()()()}if(2&e){const t=s.$implicit;i.xp6(4),i.Oqu(t.idMission),i.xp6(2),i.Oqu(t.title),i.xp6(2),i.Oqu(t.duration),i.xp6(2),i.Oqu(t.technologies),i.xp6(2),i.Oqu(t.description),i.xp6(6),i.MGl("routerLink","../modifiermission/",t.idMission,"")}}const q=function(e){return{height:e}},A=function(e){return{itemsPerPage:5,currentPage:e}},U=[{path:"",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-mission"]],decls:1,vars:0,template:function(t,o){1&t&&i._UZ(0,"router-outlet")},directives:[d.lC],styles:[""]}),e})(),children:[{path:"",redirectTo:"listmission",pathMatch:"full"},{path:"listmission",component:(()=>{class e{constructor(t,o){this.missionService=t,this.route=o,this.missions=[],this.p=1}ngOnInit(){var t;null===(t=this.route.parent)||void 0===t||t.params.subscribe(o=>{this.refreshData(+o.id)})}delete(t){this.missionService.deleteMissionById(t).subscribe(()=>this.ngOnInit())}refreshData(t){this.missionService.DisplayMissionByContrat(t).subscribe(o=>{this.missions=o})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(h),i.Y36(d.gz))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-list-mission"]],decls:33,vars:9,consts:[[1,"content-wrapper"],[1,"container-xxl","flex-grow-1","container-p-y"],[1,"fw-bold","py-3","mb-4"],["routerLink","../../../",1,"text-muted","fw-light",2,"cursor","pointer"],[1,"row"],[1,"card"],[1,"d-flex","justify-content-between"],[1,"card-header"],[1,"row","justify-content-center",2,"margin-top","20px","margin-right","15px"],[1,"col-sm-12"],["routerLink","../ajoutermission",1,"btn","btn-primary"],[1,"table-responsive","text-nowrap",3,"ngStyle"],[1,"table"],[1,"table-light"],[1,"table-border-bottom-0"],[4,"ngFor","ngForOf"],["previousLabel","Previous","nextLabel","Next","screenReaderPaginationLabel","Pagination","screenReaderPageLabel","page","screenReaderCurrentLabel","You're on page",1,"pagination",3,"pageChange","pageBoundsCorrection"],[1,"fab","fa-angular","fa-lg","text-danger","me-3"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","p-0","dropdown-toggle","hide-arrow"],[1,"bx","bx-dots-vertical-rounded"],[1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"],[1,"bx","bx-edit-alt","me-1"],[1,"dropdown-item",3,"click"],[1,"bx","bx-trash","me-1"]],template:function(t,o){1&t&&(i.TgZ(0,"div",0)(1,"div",1)(2,"h4",2)(3,"span",3),i._uU(4,"Contrat/"),i.qZA(),i._uU(5," Mission "),i.qZA(),i.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"h5",7),i._uU(10,"Table de mission"),i.qZA(),i.TgZ(11,"div",8)(12,"div",9)(13,"a",10),i._uU(14,"Ajouter Mission"),i.qZA()()()(),i.TgZ(15,"div",11)(16,"table",12)(17,"thead",13)(18,"tr")(19,"th"),i._uU(20,"IdMission"),i.qZA(),i.TgZ(21,"th"),i._uU(22,"title"),i.qZA(),i.TgZ(23,"th"),i._uU(24,"duration"),i.qZA(),i.TgZ(25,"th"),i._uU(26,"technologies"),i.qZA(),i.TgZ(27,"th"),i._uU(28,"description"),i.qZA()()(),i.TgZ(29,"tbody",14),i.YNc(30,_,24,6,"tr",15),i.ALo(31,"paginate"),i.qZA()()(),i.TgZ(32,"pagination-controls",16),i.NdJ("pageChange",function(l){return o.p=l})("pageBoundsCorrection",function(l){return o.p=l}),i.qZA()()()()()),2&t&&(i.xp6(15),i.Q6J("ngStyle",i.VKq(5,q,o.missions.length<=2?"150px":"auto")),i.xp6(15),i.Q6J("ngForOf",i.xi3(31,2,o.missions,i.VKq(7,A,o.p))))},directives:[d.rH,d.yS,m.PC,m.sg,p.LS],pipes:[p._s],styles:[""]}),e})()},{path:"ajoutermission",component:f},{path:"modifiermission/:idm",component:f}]}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[d.Bz.forChild(U)],d.Bz]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[m.ez,n.u5,n.UX,x,p.JX]]}),e})()}}]);