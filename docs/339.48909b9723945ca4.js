"use strict";(self.webpackChunkmini_project=self.webpackChunkmini_project||[]).push([[339],{8339:(j,m,p)=>{p.r(m),p.d(m,{EntreprisesModule:()=>z});var u=p(9808),a=p(5425),e=p(1223);const E=function(){return{"font-size.px":20}},Z=function(){return["list"]},d=function(){return["is-active"]},b=function(){return["form"]};let F=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-entreprises"]],decls:13,vars:10,consts:[[1,"navbar","navbar-example","navbar-expand-lg","bg-light"],[1,"container-fluid"],["href","javascript:void(0)",1,"navbar-brand",3,"ngStyle"],["type","button","data-bs-toggle","collapse","data-bs-target","",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbar-ex-4",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item","nav-link",3,"routerLink","routerLinkActive"]],template:function(t,r){1&t&&(e.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),e._uU(3,"Kadem"),e.qZA(),e.TgZ(4,"button",3),e._UZ(5,"span",4),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"a",7),e._uU(9,"List of Companies"),e.qZA(),e.TgZ(10,"a",7),e._uU(11,"Add Form"),e.qZA()()()()(),e._UZ(12,"router-outlet")),2&t&&(e.xp6(2),e.Q6J("ngStyle",e.DdM(5,E)),e.xp6(6),e.Q6J("routerLink",e.DdM(6,Z))("routerLinkActive",e.DdM(7,d)),e.xp6(2),e.Q6J("routerLink",e.DdM(8,b))("routerLinkActive",e.DdM(9,d)))},directives:[u.PC,a.yS,a.Od,a.lC],styles:[""]}),n})();var o=p(2382),x=p(2340),T=p(520);let g=(()=>{class n{constructor(t){this.http=t,this.url=x.N.defaultUrl+"/entreprise"}getAllEntreprises(){return this.http.get(this.url+"/Display")}addEntreprise(t){return this.http.post(this.url+"/Add",t)}updateEntreprise(t,r){return this.http.put(this.url+"/Modify/"+t,r)}getEntrepriseById(t){return this.http.get(this.url+"/Retrieve/"+t)}deleteEntreprise(t){return this.http.delete(this.url+"/Remove/"+t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(T.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var f=p(2290);function A(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,"this field is required !"),e.qZA())}function C(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,"symbols are not allowed !"),e.qZA())}function y(n,i){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,A,2,0,"div",25),e.YNc(2,C,2,0,"div",25),e.qZA()),2&n){const t=e.oxw(2);let r,s;e.xp6(1),e.Q6J("ngIf",null==(r=t.EntrepriseForm.get("nom"))||null==r.errors?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(s=t.EntrepriseForm.get("nom"))||null==s.errors?null:s.errors.pattern)}}function q(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,"this field is required !"),e.qZA())}function U(n,i){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,q,2,0,"div",25),e.qZA()),2&n){const t=e.oxw(2);let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.EntrepriseForm.get("numFiscal"))||null==r.errors?null:r.errors.numFiscal)}}function S(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,"this field is required !"),e.qZA())}function w(n,i){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,S,2,0,"div",25),e.qZA()),2&n){const t=e.oxw(2);let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.EntrepriseForm.get("adresse"))||null==r.errors?null:r.errors.required)}}function J(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1,"this field is required !"),e.qZA())}function I(n,i){if(1&n&&(e.TgZ(0,"div",24),e.YNc(1,J,2,0,"div",25),e.qZA()),2&n){const t=e.oxw(2);let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.EntrepriseForm.get("logo"))||null==r.errors?null:r.errors.required)}}function N(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"form",10),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().onSubmit()}),e.TgZ(1,"div",11)(2,"label",12),e._uU(3,"Name"),e.qZA(),e._UZ(4,"input",13),e.qZA(),e.YNc(5,y,3,2,"div",14),e.TgZ(6,"div",11)(7,"label",15),e._uU(8,"Tax number"),e.qZA(),e._UZ(9,"input",16),e.qZA(),e.YNc(10,U,2,1,"div",14),e.TgZ(11,"div",11)(12,"label",17),e._uU(13,"Address"),e.qZA(),e._UZ(14,"input",18),e.qZA(),e.YNc(15,w,2,1,"div",14),e.TgZ(16,"div",19)(17,"label",20),e._uU(18,"Logo"),e.qZA(),e._UZ(19,"input",21),e.qZA(),e.YNc(20,I,2,1,"div",14),e._UZ(21,"br"),e.TgZ(22,"button",22),e._uU(23),e.qZA(),e._uU(24," \xa0 "),e.TgZ(25,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().Back()}),e._uU(26,"cancel"),e.qZA()()}if(2&n){const t=e.oxw();let r,s,l,c;e.Q6J("formGroup",t.EntrepriseForm),e.xp6(5),e.Q6J("ngIf",!(null!=(r=t.EntrepriseForm.get("nom"))&&r.valid)&&(null==(r=t.EntrepriseForm.get("nom"))?null:r.touched)),e.xp6(5),e.Q6J("ngIf",!(null!=(s=t.EntrepriseForm.get("numFiscal"))&&s.valid)&&(null==(s=t.EntrepriseForm.get("numFiscal"))?null:s.touched)),e.xp6(5),e.Q6J("ngIf",!(null!=(l=t.EntrepriseForm.get("adresse"))&&l.valid)&&(null==(l=t.EntrepriseForm.get("adresse"))?null:l.touched)),e.xp6(5),e.Q6J("ngIf",!(null!=(c=t.EntrepriseForm.get("logo"))&&c.valid)&&(null==(c=t.EntrepriseForm.get("logo"))?null:c.touched)),e.xp6(2),e.Q6J("disabled",t.EntrepriseForm.invalid),e.xp6(1),e.Oqu(t.mode)}}let _=(()=>{class n{constructor(t,r,s,l){this.toastr=t,this.currentRoute=r,this.entpService=s,this.router=l,this.editMode=!1,this.pattern="^[ a-zA-Z0-9][a-zA-Z0-9 ]*$"}ngOnInit(){this.entpService.getAllEntreprises().subscribe(t=>{this.list=t,this.currentRoute.params.subscribe(r=>{this.id=+r.id,console.log(r),this.editMode=null!=r.id,this.mode=this.editMode?"Update":"Add",this.initForm(),console.log(this.EntrepriseForm)},()=>{console.log("error")},()=>{})})}initForm(){let t="",r=null,s="",l="";if("Update"==this.mode){const c=this.list.find(Q=>Q.idEntreprise==this.id);t=c.nom,r=c.numFiscal,s=c.adresse,l=c.logo,console.log()}this.EntrepriseForm=new o.cw({nom:new o.NI(t,[o.kI.required,o.kI.pattern(this.pattern)]),numFiscal:new o.NI(r,o.kI.required),adresse:new o.NI(s,o.kI.required),logo:new o.NI(l,o.kI.required)})}onSubmit(){console.log(this.EntrepriseForm),this.editMode?this.entpService.updateEntreprise(this.id,this.EntrepriseForm.value).subscribe(()=>{this.toastr.success("Company has been added !","Success"),this.router.navigate(["backoffice/entreprises/list"])}):this.entpService.addEntreprise(this.EntrepriseForm.value).subscribe(()=>{this.toastr.success("Company has been updated !","Success"),this.router.navigate(["backoffice/entreprises/list"])})}Back(){this.router.navigate(["backoffice/entreprises/list"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f._W),e.Y36(a.gz),e.Y36(g),e.Y36(a.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-form-entreprise"]],decls:13,vars:2,consts:[[1,"container-xxl","flex-grow-1","container-p-y"],[1,"fw-bold","py-3","mb-4"],[1,"text-muted","fw-light"],[1,"row"],[1,"col-xl"],[1,"card","mb-4"],[1,"card-header","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"card-body"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group","mb-3"],["for","nom",1,"form-label"],["name","nom","formControlName","nom","type","text","id","nom","placeholder","",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","numFiscal",1,"form-label"],["name","numFiscal","formControlName","numFiscal","type","number","id","numFiscal","placeholder","",1,"form-control"],["for","adresse",1,"form-label"],["name","adresse","formControlName","adresse","type","text","id","adresse","placeholder","",1,"form-control"],[1,"form-group"],["for","logo",1,"form-label"],["type","text","formControlName","logo","name","logo","id","logo","placeholder","Image Url",1,"form-control"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"btn","btn-danger",3,"click"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"h4",1)(2,"span",2),e._uU(3,"Companies/"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"h5",7),e._uU(10,"Form"),e.qZA()(),e.TgZ(11,"div",8),e.YNc(12,N,27,7,"form",9),e.qZA()()()()()),2&t&&(e.xp6(4),e.hij(" ",r.mode,""),e.xp6(8),e.Q6J("ngIf",r.EntrepriseForm))},directives:[u.O5,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.wV],styles:[""]}),n})(),L=(()=>{class n{constructor(){this.notification=new e.vpe}ngOnInit(){}notifyParent(){this.notification.emit(this.entreprise)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-entreprise"]],inputs:{entreprise:"entreprise"},outputs:{notification:"notification"},decls:15,vars:5,consts:[[1,"card","h-100"],[1,"img-wrap"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["type","button",1,"btn","btn-success",3,"routerLink"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"h4",4),e._uU(5),e.qZA(),e.TgZ(6,"h6",5),e._uU(7),e.qZA(),e.TgZ(8,"p",5),e._uU(9),e.qZA(),e.TgZ(10,"button",6),e._uU(11,"Edit"),e.qZA(),e._uU(12," \xa0 "),e.TgZ(13,"button",7),e.NdJ("click",function(){return r.notifyParent()}),e._uU(14,"Delete"),e.qZA()()()),2&t&&(e.xp6(2),e.s9C("src",r.entreprise.logo,e.LSH),e.xp6(3),e.Oqu(r.entreprise.nom),e.xp6(2),e.hij("Tax number: ",r.entreprise.numFiscal,""),e.xp6(2),e.hij("Address : ",r.entreprise.adresse,""),e.xp6(1),e.MGl("routerLink","/backoffice/entreprises/update/",r.entreprise.idEntreprise,""))},directives:[a.rH],styles:[""]}),n})();var h=p(7425),v=p(3189);function M(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-entreprise",16),e.NdJ("notification",function(s){return e.CHM(t),e.oxw().delete(s)}),e.qZA()}2&n&&e.Q6J("entreprise",i.$implicit)}const k=[{path:"",component:F,children:[{path:"list",component:(()=>{class n{constructor(t,r,s){this.toastr=t,this.EntpServ=r,this.router=s,this.page=1,this.pageSize=6}ngOnInit(){this.EntpServ.getAllEntreprises().subscribe(t=>{this.listEntp=t},()=>{},()=>{this.length=this.listEntp.length})}delete(t){confirm("Are you sure to delete "+t.nom)&&this.EntpServ.deleteEntreprise(t.idEntreprise).subscribe({next:()=>{let r=this.listEntp.indexOf(t);this.listEntp.splice(r,1),this.toastr.success(t.nom+" has been deleted successfully","Success")},error:r=>{console.log("err"+r),this.toastr.error("something went wrong !","Error")}})}Back(){this.router.navigate(["/backoffice"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f._W),e.Y36(g),e.Y36(a.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-entreprise"]],decls:21,vars:15,consts:[[1,"container-xxl","flex-grow-1","container-p-y"],[2,"width","30%","margin-left","700px"],[1,"d-flex","justify-content-end"],[1,"input-group"],[1,"input-group-text"],[1,"tf-icons","bx","bx-search"],["type","text","name","search","autocomplete","off","placeholder","Search by name",1,"form-control",3,"ngModel","ngModelChange"],[1,"fw-bold","py-3","mb-4"],[1,"text-muted","fw-light"],[1,"row","row-cols-1","row-cols-md-3","g-4","mb-5"],[3,"entreprise","notification",4,"ngFor","ngForOf"],[1,"justify-content-center","d-flex"],[1,"row","g-0","align-items-center","pb-4"],[1,"col-sm"],[1,"mb-sm"],[2,"align-items","center",3,"page","pageSize","collectionSize","pageChange"],[3,"entreprise","notification"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3)(4,"span",4),e._UZ(5,"i",5),e.qZA(),e.TgZ(6,"input",6),e.NdJ("ngModelChange",function(l){return r.searchText=l}),e.qZA()()()(),e.TgZ(7,"h4",7),e._UZ(8,"span",8),e._uU(9," List of Companies"),e.qZA(),e.TgZ(10,"div",9),e.YNc(11,M,1,1,"app-entreprise",10),e.ALo(12,"filter"),e.ALo(13,"slice"),e.qZA(),e.TgZ(14,"div",11)(15,"div",12)(16,"div",13)(17,"div")(18,"p",14),e._uU(19),e.qZA()()(),e.TgZ(20,"ngb-pagination",15),e.NdJ("pageChange",function(l){return r.page=l}),e.qZA()()()()),2&t&&(e.xp6(6),e.Q6J("ngModel",r.searchText),e.xp6(5),e.Q6J("ngForOf",e.xi3(12,8,e.Dn7(13,11,r.listEntp,(r.page-1)*r.pageSize,r.page*r.pageSize),r.searchText)),e.xp6(8),e.lnq("Showing ",r.page*r.pageSize-(r.pageSize-1)," to ",r.page*r.pageSize," of ",r.length,""),e.xp6(1),e.Q6J("page",r.page)("pageSize",r.pageSize)("collectionSize",r.length))},directives:[o._Y,o.JL,o.F,o.Fj,o.JJ,o.On,u.sg,L,h.N9],pipes:[v.Z,u.OU],styles:[""]}),n})()},{path:"form",component:_},{path:"update/:id",component:_}]}];let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.Bz.forChild(k)],a.Bz]}),n})(),z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,Y,o.u5,o.UX,h.jF,v.h]]}),n})()}}]);